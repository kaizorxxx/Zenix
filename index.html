<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monopoli Keliling Dunia</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }
        
        #game-container {
            display: flex;
            width: 95%;
            max-width: 1200px;
            margin-top: 20px;
        }
        
        #board {
            width: 70%;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            position: relative;
            aspect-ratio: 1/1;
        }
        
        #sidebar {
            width: 30%;
            padding: 15px;
            background-color: #e6f2ff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-left: 15px;
            display: flex;
            flex-direction: column;
        }
        
        #money-display {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
        
        .property {
            position: absolute;
            width: 10%;
            height: 10%;
            border: 1px solid #ccc;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .property:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .player {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            transition: all 0.5s;
            z-index: 5;
        }
        
        #dice-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .dice {
            width: 50px;
            height: 50px;
            background-color: white;
            border-radius: 10px;
            margin: 0 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }
        
        #controls {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        button {
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        #player-info {
            flex-grow: 1;
            overflow-y: auto;
        }
        
        .player-card {
            background-color: white;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
        
        #chat {
            margin-top: 20px;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }
        
        #chat-messages {
            height: 100px;
            overflow-y: auto;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        #chat-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close {
            float: right;
            cursor: pointer;
            font-size: 24px;
        }
        
        #property-details {
            text-align: center;
        }
        
        #property-image {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .color-bar {
            height: 10px;
            width: 100%;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Monopoli Keliling Dunia</h1>
    
    <div id="game-container">
        <div id="board">
            <div id="money-display">Uang: $1,500</div>
            <!-- Papan permainan akan diisi oleh JavaScript -->
        </div>
        
        <div id="sidebar">
            <div id="dice-container">
                <div class="dice" id="dice1">?</div>
                <div class="dice" id="dice2">?</div>
            </div>
            
            <div id="controls">
                <button id="roll-dice">Lempar Dadu</button>
                <button id="end-turn" disabled>Akhiri Giliran</button>
            </div>
            
            <div id="player-info">
                <!-- Info pemain akan diisi oleh JavaScript -->
            </div>
            
            <div id="chat">
                <h3>Chat</h3>
                <div id="chat-messages"></div>
                <input type="text" id="chat-input" placeholder="Ketik pesan...">
            </div>
        </div>
    </div>
    
    <div id="property-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="property-details">
                <img id="property-image" src="" alt="Gambar Properti">
                <h2 id="property-name"></h2>
                <div class="color-bar" id="property-color"></div>
                <p id="property-price"></p>
                <p id="property-rent"></p>
                <p id="property-owner"></p>
                <div id="property-actions">
                    <button id="buy-property">Beli Properti</button>
                    <button id="pay-rent">Bayar Sewa</button>
                    <button id="close-modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="game-setup" class="modal" style="display: flex;">
        <div class="modal-content">
            <h2>Setup Permainan</h2>
            <div>
                <h3>Jumlah Pemain:</h3>
                <select id="player-count">
                    <option value="2">2 Pemain</option>
                    <option value="3">3 Pemain</option>
                    <option value="4">4 Pemain</option>
                </select>
                
                <h3>Mode Permainan:</h3>
                <select id="game-mode">
                    <option value="local">Lokal (Multiplayer)</option>
                    <option value="ai">Lawan Robot</option>
                </select>
                
                <div id="player-names">
                    <!-- Nama pemain akan diisi oleh JavaScript -->
                </div>
            </div>
            <button id="start-game">Mulai Permainan</button>
        </div>
    </div>
    
    <script>
        // Data properti bertema dunia
        const properties = [
            { id: 1, name: "Bali, Indonesia", price: 60, rent: 2, color: "#FF5733", group: "asia", image: "https://images.unsplash.com/photo-1518544866330-95a5acf73f14" },
            { id: 2, name: "Tokyo, Jepang", price: 80, rent: 4, color: "#FF5733", group: "asia", image: "https://images.unsplash.com/photo-1503899036084-c55cdd92da26" },
            { id: 3, name: "Paris, Prancis", price: 100, rent: 6, color: "#33FF57", group: "europe", image: "https://images.unsplash.com/photo-1431274172761-fca41d930114" },
            { id: 4, name: "Roma, Italia", price: 120, rent: 8, color: "#33FF57", group: "europe", image: "https://images.unsplash.com/photo-1529260830199-42c24126f198" },
            { id: 5, name: "New York, USA", price: 140, rent: 10, color: "#3357FF", group: "america", image: "https://images.unsplash.com/photo-1485871981521-5b1fd3805eee" },
            { id: 6, name: "Rio de Janeiro, Brazil", price: 160, rent: 12, color: "#3357FF", group: "america", image: "https://images.unsplash.com/photo-1483729558449-99ef09a8c325" },
            { id: 7, name: "Kairo, Mesir", price: 180, rent: 14, color: "#FF33A8", group: "africa", image: "https://images.unsplash.com/photo-1583417319070-4a69db38a482" },
            { id: 8, name: "Cape Town, Afrika Selatan", price: 200, rent: 16, color: "#FF33A8", group: "africa", image: "https://images.unsplash.com/photo-1520250497591-112f2f40a3f4" },
            { id: 9, name: "Sydney, Australia", price: 220, rent: 18, color: "#A833FF", group: "oceania", image: "https://images.unsplash.com/photo-1523428096881-5bd79d043006" },
            { id: 10, name: "Auckland, Selandia Baru", price: 240, rent: 20, color: "#A833FF", group: "oceania", image: "https://images.unsplash.com/photo-1507699622108-4be3abd695ad" },
            { id: 11, name: "Dubai, UAE", price: 260, rent: 22, color: "#33FFF5", group: "middleeast", image: "https://images.unsplash.com/photo-1512453979798-5ea266f8880c" },
            { id: 12, name: "Moskwa, Rusia", price: 280, rent: 24, color: "#33FFF5", group: "europe", image: "https://images.unsplash.com/photo-1513326738677-b964603b136d" }
        ];

        // Data sudut papan
        const corners = [
            { id: 0, name: "Mulai", type: "start" },
            { id: 10, name: "Penjara", type: "jail" },
            { id: 20, name: "Parkir Gratis", type: "free-parking" },
            { id: 30, name: "Pergi ke Penjara", type: "go-to-jail" }
        ];

        // Data kartu kesempatan
        const chanceCards = [
            { text: "Anda memenangkan kontes kecantikan. Dapatkan $50", action: "add-money", amount: 50 },
            { text: "Biaya sekolah. Bayar $100", action: "subtract-money", amount: 100 },
            { text: "Anda mewarisi $100", action: "add-money", amount: 100 },
            { text: "Pajak penghasilan. Bayar $75", action: "subtract-money", amount: 75 },
            { text: "Kembali ke Start", action: "move-to", position: 0 },
            { text: "Pergi ke Penjara. Jangan lewatkan Start", action: "move-to", position: 10 }
        ];

        // Data pemain
        const players = [];
        let currentPlayerIndex = 0;
        let gameStarted = false;
        let gameMode = "local";
        let diceRolled = false;
        let currentProperty = null;

        // Elemen DOM
        const boardElement = document.getElementById('board');
        const moneyDisplay = document.getElementById('money-display');
        const dice1Element = document.getElementById('dice1');
        const dice2Element = document.getElementById('dice2');
        const rollDiceButton = document.getElementById('roll-dice');
        const endTurnButton = document.getElementById('end-turn');
        const playerInfoElement = document.getElementById('player-info');
        const chatMessagesElement = document.getElementById('chat-messages');
        const chatInputElement = document.getElementById('chat-input');
        const propertyModal = document.getElementById('property-modal');
        const propertyNameElement = document.getElementById('property-name');
        const propertyImageElement = document.getElementById('property-image');
        const propertyColorElement = document.getElementById('property-color');
        const propertyPriceElement = document.getElementById('property-price');
        const propertyRentElement = document.getElementById('property-rent');
        const propertyOwnerElement = document.getElementById('property-owner');
        const buyPropertyButton = document.getElementById('buy-property');
        const payRentButton = document.getElementById('pay-rent');
        const closeModalButton = document.getElementById('close-modal');
        const gameSetupModal = document.getElementById('game-setup');
        const playerCountSelect = document.getElementById('player-count');
        const gameModeSelect = document.getElementById('game-mode');
        const playerNamesElement = document.getElementById('player-names');
        const startGameButton = document.getElementById('start-game');

        // Warna pemain
        const playerColors = ['#FF0000', '#00FF00', '#0000FF', '#FFFF00'];

        // Inisialisasi papan
        function initializeBoard() {
            // Kosongkan papan
            boardElement.innerHTML = '';
            
            // Tambahkan display uang
            boardElement.appendChild(moneyDisplay);
            
            // Buat properti di sekitar papan
            const boardSize = boardElement.offsetWidth;
            const propertySize = boardSize / 10;
            
            // Sisi atas
            for (let i = 1; i < 10; i++) {
                createProperty(i, i * propertySize, 0, propertySize, propertySize);
            }
            
            // Sisi kanan
            for (let i = 11; i < 20; i++) {
                createProperty(i, boardSize - propertySize, (i - 10) * propertySize, propertySize, propertySize);
            }
            
            // Sisi bawah
            for (let i = 21; i < 30; i++) {
                createProperty(i, boardSize - ((i - 20) * propertySize), boardSize - propertySize, propertySize, propertySize);
            }
            
            // Sisi kiri
            for (let i = 31; i < 40; i++) {
                createProperty(i, 0, boardSize - ((i - 30) * propertySize), propertySize, propertySize);
            }
            
            // Tambahkan sudut papan
            createCorner(0, 0, 0, propertySize, propertySize); // Mulai
            createCorner(10, boardSize - propertySize, 0, propertySize, propertySize); // Penjara
            createCorner(20, boardSize - propertySize, boardSize - propertySize, propertySize, propertySize); // Parkir Gratis
            createCorner(30, 0, boardSize - propertySize, propertySize, propertySize); // Pergi ke Penjara
        }

        // Buat properti di papan
        function createProperty(id, left, top, width, height) {
            const property = document.createElement('div');
            property.className = 'property';
            property.style.left = `${left}px`;
            property.style.top = `${top}px`;
            property.style.width = `${width}px`;
            property.style.height = `${height}px`;
            
            // Temukan data properti
            const propertyData = properties.find(p => p.id === id % 40);
            
            if (propertyData) {
                property.innerHTML = `<strong>${propertyData.name}</strong><br>$${propertyData.price}`;
                property.style.backgroundColor = `${propertyData.color}20`;
                property.style.borderColor = propertyData.color;
                
                // Tambahkan event listener untuk menampilkan detail properti
                property.addEventListener('click', () => {
                    showPropertyDetails(propertyData);
                });
            } else {
                // Jika bukan properti, mungkin kartu kesempatan atau lainnya
                if (id % 5 === 0) {
                    property.innerHTML = 'Kesempatan';
                    property.style.backgroundColor = '#FFD70020';
                    property.style.borderColor = '#FFD700';
                } else if (id % 10 === 0 && id % 20 !== 0) {
                    property.innerHTML = 'Pajak<br>Luxury<br>Bayar $75';
                    property.style.backgroundColor = '#FF634720';
                    property.style.borderColor = '#FF6347';
                }
            }
            
            boardElement.appendChild(property);
        }

        // Buat sudut papan
        function createCorner(id, left, top, width, height) {
            const corner = document.createElement('div');
            corner.className = 'property';
            corner.style.left = `${left}px`;
            corner.style.top = `${top}px`;
            corner.style.width = `${width}px`;
            corner.style.height = `${height}px`;
            
            const cornerData = corners.find(c => c.id === id);
            if (cornerData) {
                corner.innerHTML = `<strong>${cornerData.name}</strong>`;
                corner.style.backgroundColor = '#FFFFFF';
                corner.style.borderColor = '#000000';
            }
            
            boardElement.appendChild(corner);
        }

        // Tampilkan detail properti
        function showPropertyDetails(property) {
            currentProperty = property;
            propertyNameElement.textContent = property.name;
            propertyImageElement.src = property.image;
            propertyColorElement.style.backgroundColor = property.color;
            propertyPriceElement.textContent = `Harga: $${property.price}`;
            propertyRentElement.textContent = `Sewa: $${property.rent}`;
            
            // Cari pemilik properti
            const owner = players.find(player => 
                player.properties.some(p => p.id === property.id)
            );
            
            if (owner) {
                propertyOwnerElement.textContent = `Pemilik: ${owner.name}`;
                propertyOwnerElement.style.color = owner.color;
                
                // Tampilkan tombol yang sesuai
                if (owner.id === players[currentPlayerIndex].id) {
                    buyPropertyButton.style.display = 'none';
                    payRentButton.style.display = 'none';
                } else {
                    buyPropertyButton.style.display = 'none';
                    payRentButton.style.display = 'inline-block';
                }
            } else {
                propertyOwnerElement.textContent = 'Pemilik: Tidak ada';
                propertyOwnerElement.style.color = '#000000';
                
                buyPropertyButton.style.display = 'inline-block';
                payRentButton.style.display = 'none';
            }
            
            propertyModal.style.display = 'flex';
        }

        // Inisialisasi pemain
        function initializePlayers(count) {
            players.length = 0;
            
            for (let i = 0; i < count; i++) {
                players.push({
                    id: i,
                    name: `Pemain ${i + 1}`,
                    color: playerColors[i],
                    money: 1500,
                    position: 0,
                    properties: [],
                    inJail: false,
                    jailTurns: 0
                });
                
                // Tambahkan token pemain ke papan
                addPlayerToken(i);
            }
            
            updatePlayerInfo();
        }

        // Tambahkan token pemain ke papan
        function addPlayerToken(playerId) {
            const player = players[playerId];
            const token = document.createElement('div');
            token.className = 'player';
            token.id = `player-${playerId}`;
            token.style.backgroundColor = player.color;
            
            // Posisikan token pemain
            updatePlayerPosition(playerId);
            
            boardElement.appendChild(token);
        }

        // Perbarui posisi token pemain
        function updatePlayerPosition(playerId) {
            const player = players[playerId];
            const token = document.getElementById(`player-${playerId}`);
            
            if (!token) return;
            
            const boardSize = boardElement.offsetWidth;
            const propertySize = boardSize / 10;
            
            let left, top;
            
            if (player.position < 10) {
                // Sisi atas
                left = player.position * propertySize + (propertySize / 4);
                top = propertySize / 4;
            } else if (player.position < 20) {
                // Sisi kanan
                left = boardSize - propertySize + (propertySize / 4);
                top = (player.position - 10) * propertySize + (propertySize / 4);
            } else if (player.position < 30) {
                // Sisi bawah
                left = boardSize - ((player.position - 20) * propertySize) - (propertySize / 4);
                top = boardSize - propertySize + (propertySize / 4);
            } else {
                // Sisi kiri
                left = propertySize / 4;
                top = boardSize - ((player.position - 30) * propertySize) - (propertySize / 4);
            }
            
            // Sesuaikan posisi berdasarkan jumlah pemain
            const offset = playerId * 10;
            token.style.left = `${left + offset}px`;
            token.style.top = `${top + offset}px`;
        }

        // Perbarui info pemain di sidebar
        function updatePlayerInfo() {
            playerInfoElement.innerHTML = '';
            
            players.forEach((player, index) => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';
                playerCard.style.borderLeft = `5px solid ${player.color}`;
                
                let propertiesList = 'Tidak ada properti';
                if (player.properties.length > 0) {
                    propertiesList = player.properties.map(p => p.name).join(', ');
                }
                
                playerCard.innerHTML = `
                    <h3 style="color: ${player.color}">${player.name} ${index === currentPlayerIndex ? '(Giliran Anda)' : ''}</h3>
                    <p>Uang: $${player.money}</p>
                    <p>Properti: ${propertiesList}</p>
                `;
                
                playerInfoElement.appendChild(playerCard);
            });
            
            // Perbarui tampilan uang pemain saat ini
            moneyDisplay.textContent = `Uang: $${players[currentPlayerIndex].money}`;
        }

        // Lempar dadu
        function rollDice() {
            if (!diceRolled) {
                const dice1 = Math.floor(Math.random() * 6) + 1;
                const dice2 = Math.floor(Math.random() * 6) + 1;
                
                dice1Element.textContent = dice1;
                dice2Element.textContent = dice2;
                
                diceRolled = true;
                rollDiceButton.disabled = true;
                endTurnButton.disabled = false;
                
                movePlayer(currentPlayerIndex, dice1 + dice2);
                
                // Jika bermain melawan AI, biarkan AI bermain setelah jeda
                if (gameMode === 'ai' && currentPlayerIndex !== 0) {
                    setTimeout(aiTurn, 1500);
                }
                
                return dice1 + dice2;
            }
            return 0;
        }

        // Pindahkan pemain
        function movePlayer(playerId, steps) {
            const player = players[playerId];
            player.position = (player.position + steps) % 40;
            
            updatePlayerPosition(playerId);
            
            // Periksa apakah melewati start
            if (player.position < steps) {
                player.money += 200;
                addToChat(`${player.name} melewati Start dan mendapatkan $200`);
                updatePlayerInfo();
            }
            
            // Periksa posisi baru
            checkPosition(playerId);
        }

        // Periksa posisi pemain
        function checkPosition(playerId) {
            const player = players[playerId];
            const currentPos = player.position;
            
            // Periksa sudut papan
            const corner = corners.find(c => c.id === currentPos);
            if (corner) {
                switch (corner.type) {
                    case 'start':
                        // Sudah ditangani saat melewati start
                        break;
                    case 'jail':
                        // Hanya mengunjungi penjara
                        addToChat(`${player.name} mengunjungi penjara`);
                        break;
                    case 'free-parking':
                        addToChat(`${player.name} parkir gratis`);
                        break;
                    case 'go-to-jail':
                        player.position = 10;
                        player.inJail = true;
                        updatePlayerPosition(playerId);
                        addToChat(`${player.name} pergi ke penjara!`);
                        break;
                }
                return;
            }
            
            // Periksa properti
            const property = properties.find(p => p.id === currentPos);
            if (property) {
                showPropertyDetails(property);
                return;
            }
            
            // Periksa kartu kesempatan
            if (currentPos % 5 === 0 && currentPos % 10 !== 0) {
                drawChanceCard(playerId);
                return;
            }
            
            // Periksa pajak
            if (currentPos % 10 === 0 && currentPos % 20 !== 0) {
                player.money -= 75;
                addToChat(`${player.name} membayar pajak luxury $75`);
                updatePlayerInfo();
                return;
            }
        }

        // Ambil kartu kesempatan
        function drawChanceCard(playerId) {
            const player = players[playerId];
            const card = chanceCards[Math.floor(Math.random() * chanceCards.length)];
            
            addToChat(`${player.name} mengambil kartu kesempatan: ${card.text}`);
            
            switch (card.action) {
                case 'add-money':
                    player.money += card.amount;
                    break;
                case 'subtract-money':
                    player.money -= card.amount;
                    break;
                case 'move-to':
                    player.position = card.position;
                    updatePlayerPosition(playerId);
                    checkPosition(playerId); // Periksa posisi baru
                    break;
            }
            
            updatePlayerInfo();
        }

        // Beli properti
        function buyProperty() {
            const player = players[currentPlayerIndex];
            
            if (player.money >= currentProperty.price) {
                player.money -= currentProperty.price;
                player.properties.push(currentProperty);
                
                addToChat(`${player.name} membeli ${currentProperty.name} seharga $${currentProperty.price}`);
                
                updatePlayerInfo();
                closeModal();
            } else {
                alert('Uang tidak cukup!');
            }
        }

        // Bayar sewa
        function payRent() {
            const currentPlayer = players[currentPlayerIndex];
            const owner = players.find(player => 
                player.properties.some(p => p.id === currentProperty.id)
            );
            
            if (owner && currentPlayer.money >= currentProperty.rent) {
                currentPlayer.money -= currentProperty.rent;
                owner.money += currentProperty.rent;
                
                addToChat(`${currentPlayer.name} membayar sewa $${currentProperty.rent} untuk ${currentProperty.name} ke ${owner.name}`);
                
                updatePlayerInfo();
                closeModal();
            } else if (owner) {
                alert('Uang tidak cukup untuk membayar sewa!');
            }
        }

        // Akhiri giliran
        function endTurn() {
            diceRolled = false;
            rollDiceButton.disabled = false;
            endTurnButton.disabled = true;
            
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            updatePlayerInfo();
            
            // Jika mode AI dan giliran AI, biarkan AI bermain
            if (gameMode === 'ai' && currentPlayerIndex !== 0) {
                setTimeout(aiTurn, 1000);
            }
        }

        // AI bermain
        function aiTurn() {
            if (!gameStarted || gameMode !== 'ai' || currentPlayerIndex === 0) return;
            
            const player = players[currentPlayerIndex];
            
            // Lempar dadu
            const total = rollDice();
            addToChat(`${player.name} melempar dadu dan mendapatkan ${total}`);
            
            // AI akan membeli properti jika memiliki cukup uang
            if (currentProperty && !currentProperty.owner && player.money >= currentProperty.price) {
                setTimeout(() => {
                    buyProperty();
                    setTimeout(endTurn, 1000);
                }, 1500);
            } else {
                setTimeout(endTurn, 1500);
            }
        }

        // Tambahkan pesan ke chat
        function addToChat(message) {
            const messageElement = document.createElement('div');
            messageElement.textContent = message;
            chatMessagesElement.appendChild(messageElement);
            chatMessagesElement.scrollTop = chatMessagesElement.scrollHeight;
        }

        // Tutup modal
        function closeModal() {
            propertyModal.style.display = 'none';
        }

        // Setup pemain
        function setupPlayerNames() {
            playerNamesElement.innerHTML = '';
            const count = parseInt(playerCountSelect.value);
            
            for (let i = 0; i < count; i++) {
                const div = document.createElement('div');
                div.innerHTML = `
                    <label for="player-${i}-name">Nama Pemain ${i + 1}:</label>
                    <input type="text" id="player-${i}-name" value="Pemain ${i + 1}">
                `;
                playerNamesElement.appendChild(div);
            }
        }

        // Mulai permainan
        function startGame() {
            const count = parseInt(playerCountSelect.value);
            gameMode = gameModeSelect.value;
            
            // Set nama pemain
            for (let i = 0; i < count; i++) {
                const nameInput = document.getElementById(`player-${i}-name`);
                if (nameInput) {
                    players[i].name = nameInput.value || `Pemain ${i + 1}`;
                }
            }
            
            gameSetupModal.style.display = 'none';
            gameStarted = true;
            
            // Jika mode AI, set pemain pertama sebagai manusia, lainnya AI
            if (gameMode === 'ai') {
                for (let i = 1; i < count; i++) {
                    players[i].name = `Robot ${i}`;
                }
            }
            
            updatePlayerInfo();
        }

        // Event listeners
        rollDiceButton.addEventListener('click', rollDice);
        endTurnButton.addEventListener('click', endTurn);
        buyPropertyButton.addEventListener('click', buyProperty);
        payRentButton.addEventListener('click', payRent);
        closeModalButton.addEventListener('click', closeModal);
        document.querySelector('.close').addEventListener('click', closeModal);
        startGameButton.addEventListener('click', startGame);
        playerCountSelect.addEventListener('change', setupPlayerNames);
        gameModeSelect.addEventListener('change', function() {
            if (this.value === 'ai') {
                playerCountSelect.value = '2';
                setupPlayerNames();
            }
        });

        chatInputElement.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && this.value.trim() !== '') {
                addToChat(`${players[0].name}: ${this.value}`);
                this.value = '';
            }
        });

        // Inisialisasi
        window.addEventListener('load', function() {
            initializeBoard();
            setupPlayerNames();
            initializePlayers(2); // Default 2 pemain
        });
    </script>
</body>
</html>